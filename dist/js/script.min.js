var getTestimonialUsersTemplate=(a,t,e)=>`
    <div class="item testimonial-item">
                <div class="row">
                  <div class="col-4">
                    <img src="${e}" class="testimonial-img" alt="" />
                  </div>
                  <div class="col-12 col-sm-8">
                    <div class="testimonial-card">
                      <h4>${a}</h4>
                      <h5> ${t}</h5>
                    </div>
                  </div>
                </div>
              </div>
`,userDataTemplate=a=>`
                  <tr data-id="${a.id}">
                      <td class="user-data">${a.firstName}</td>
                      <td class="user-data">${a.lastName}</td>
                      <td class="user-data">${a.businessEmail}</td>
                      <td class="user-data">${a.company}</td>
                      <td class="user-data">${a.country}</td>
                      <td class="user-data">
                          <div class="action-btns">
                <i class="fa-solid fa-lg fa-pencil btn-edit" data-id="${a.id}"></i>
                <i class="fa-solid fa-lg fa-trash btn-delete" data-id="${a.id}"></i>
              </div>
                </td>
               </tr>
               `,initTestimonialsCarousel=()=>{$(".testimonial-carousel").owlCarousel({items:1,nav:!0,loop:!0,navText:['<a href="javascript:void(0)"><span class="arrow-left"></span></a>','<a href="javascript:void(0)"><span class="arrow-right"></span></a>'],dots:!0})},getTestimonialUsers=async()=>{$(".spinner-border").show();var a=await $.ajax({url:"https://jsonplaceholder.typicode.com/users?_limit=3"}),a=await Promise.all(a.map(async a=>{var t=(await $.ajax({url:"https://randomuser.me/api/"})).results[0].picture.large;return getTestimonialUsersTemplate(a.name,a.company.catchPhrase,t)}));$(".testimonial-carousel").html(a.join(" ")),initTestimonialsCarousel(),$(".spinner-border").hide()},userDataUrl=(getTestimonialUsers(),$(".contact-form").on("submit",function(a){a.preventDefault(),$(".empty-field-warning").hide(),$(".input-field").removeClass("error");var t=!0,a=Object.fromEntries(new FormData(this));$(".data-input").each(function(){if(!$(this).val().trim())return t=!1,$(this).siblings(".empty-field-warning").show(),$(this).closest(".input-field").addClass("error"),$(this).trigger("focus"),!1}),t&&$.ajax({url:"http://localhost:3000/formData",method:"POST",contentType:"application/json",data:JSON.stringify(a),success:()=>{$(".data-input").val(""),alert("Form submitted successfully!"),fetchUserDataIntoTable()},error:()=>{alert("Error in form submission!")}})}),$(".data-input").on("input",function(){$(this).val()&&($(this).siblings(".empty-field-warning").hide(),$(this).closest(".input-field").removeClass("error"))}),"http://localhost:3000/formData"),fetchUserDataIntoTable=async()=>{try{var a=await $.ajax({url:userDataUrl}),t=$(".table-body").empty();a.forEach(a=>t.append(userDataTemplate(a)))}catch(a){console.error("Error fetching user data:",a),alert("Failed to fetch user data.")}},deleteUserData=($(".table-body").on("click",".btn-edit, .btn-delete",function(a){a.preventDefault();var a=$(this),t=userDataUrl+"/"+a.data("id");a.hasClass("btn-delete")?deleteUserData(t,a):editUserData(t)}),async(a,t)=>{try{await $.ajax({url:a,method:"DELETE"}),t.closest("tr").fadeOut(200)}catch(a){console.error("Error deleting user:",a),alert("Failed to delete user.")}}),editUserData=async a=>{try{var t=await $.ajax({url:a});$(".data-input").each(function(){$(this).val(t[$(this).attr("name")])}),$("#user-id").val(t.id),$(".edit-form").fadeIn()}catch(a){console.error("Error fetching user for edit:",a),alert("Failed to load user data for editing.")}};$(".btn-cancel").on("click",()=>$(".edit-form").fadeOut()),$(".edit-data-form").on("submit",async function(a){a.preventDefault();var a=$("#user-id").val(),t=userDataUrl+"/"+a,e=Object.fromEntries(new FormData(this));try{await $.ajax({url:t,method:"PUT",contentType:"application/json",data:JSON.stringify(e)}),alert("User data updated successfully!"),$(`.table-body tr[data-id='${a}']`).replaceWith(userDataTemplate(e)),$(".edit-form").fadeOut()}catch(a){console.error("Error updating user:",a),alert("Failed to update user data.")}}),fetchUserDataIntoTable(),Fancybox.bind("[data-fancybox]",{});